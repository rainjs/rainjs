

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Server and component configuration &mdash; Rain 0.25.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.25.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Rain 0.25.0 documentation" href="../index.html" />
    <link rel="next" title="RAIN component descriptor" href="../server/component_descriptor.html" />
    <link rel="prev" title="RAIN SDK Tutorial" href="rain_sdk_tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../server/component_descriptor.html" title="RAIN component descriptor"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rain_sdk_tutorial.html" title="RAIN SDK Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Rain 0.25.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="server-and-component-configuration">
<h1>Server and component configuration<a class="headerlink" href="#server-and-component-configuration" title="Permalink to this headline">¶</a></h1>
<p>A RAIN application has two major configuration points: the server configuration and the component
level configuration.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>You must have a conf folder or setup a conf folder for your project</li>
<li>Do not keep your credentials inside code, as a recommendation you can put them inside
a credentials.conf file the <tt class="docutils literal"><span class="pre">credentials</span></tt> name is not mandatory</li>
<li>All the configuration files must be named &lt;name&gt;.conf any other files will be ignored.</li>
</ul>
</div>
<div class="section" id="server-configuration">
<h2>Server configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">¶</a></h2>
<p>The RAIN server has a set of configuration files that are located in a configuration folder. These
files have to be in JSON format. When the RAIN server starts it reads all the files with the
<tt class="docutils literal"><span class="pre">.conf</span></tt> extension from the configuration folder which is determined in the following order:</p>
<blockquote>
<div><ul class="simple">
<li>if the RAIN_CONF environment variable is set, this value is used</li>
<li>if the <tt class="docutils literal"><span class="pre">dir</span></tt> parameter of the <tt class="docutils literal"><span class="pre">raind</span></tt> process is set, the location is <tt class="docutils literal"><span class="pre">&lt;dir&gt;/conf</span></tt></li>
<li>the default configuration that is <tt class="docutils literal"><span class="pre">&lt;project-root&gt;/conf</span></tt></li>
</ul>
</div></blockquote>
<p>If no configuration files are found or the format is invalid then the server won&#8217;t start.</p>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>The server configuration file has required and optional parameters described below. The required
fields are formatted with <strong>bold</strong>.</p>
<ul class="simple">
<li><strong>server</strong> - an Object with the following keys:<ul>
<li><strong>port</strong> - the HTTP server port</li>
<li><strong>components</strong> - an Array of folder paths that contain RAIN components. The folder path can
be absolute or relative to the current working directory.</li>
<li><strong>timeoutForRequests</strong> - the number of seconds the server should wait for a response when
executing server-side code from a component&#8217;s controller. If the timeout is reached the
client receives an error response.</li>
</ul>
</li>
<li><strong>defaultLanguage</strong> - a String representing the default language used by the I18N feature to
translate messages and to determine what localized resources to use. This value is used to
determine translated text when a message translation in a required language couldn&#8217;t be found.</li>
<li>language - a String representing the application language. This parameter is used by the I18N
feature to translate messages and to determine what localized resources to use.</li>
<li>logger - an Object used to configure the Logger feature. The logging level and appenders can also
be configured here. For information about the entire structure of this parameter, check the
<a class="reference internal" href="../server/api/Logger.html"><em>Logger API</em></a>.</li>
<li>languages - an Array of objects with <tt class="docutils literal"><span class="pre">key</span></tt> and <tt class="docutils literal"><span class="pre">text</span></tt> String keys used by the language
selector component. Using this component the user can select the application language.</li>
<li>errorComponent - an Object with <tt class="docutils literal"><span class="pre">id</span></tt> and <tt class="docutils literal"><span class="pre">version</span></tt> keys that sets what component to be used
in exception cases. The default value is the <tt class="docutils literal"><span class="pre">error</span></tt> component provided in the RAIN SDK.</li>
<li>loadingComponent - an Object with <tt class="docutils literal"><span class="pre">id</span></tt>, <tt class="docutils literal"><span class="pre">version</span></tt>, <tt class="docutils literal"><span class="pre">viewId</span></tt> and <tt class="docutils literal"><span class="pre">timeout</span></tt> keys that sets
what component to be used while the client side waits for other components to be rendered. The
default value is the <tt class="docutils literal"><span class="pre">placeholder</span></tt> component provided in the RAIN SDK. The <tt class="docutils literal"><span class="pre">timeout</span></tt>
parameter set how much to wait for a render response before showing the loading component.</li>
<li>loginComponent - an Object with <tt class="docutils literal"><span class="pre">id</span></tt>, <tt class="docutils literal"><span class="pre">version</span></tt> and <tt class="docutils literal"><span class="pre">viewId</span></tt> keys that specify where the
client should be redirected after an unsuccessful authentication attempt.</li>
<li>mainComponent - an Object with <tt class="docutils literal"><span class="pre">id</span></tt>, <tt class="docutils literal"><span class="pre">version</span></tt> and <tt class="docutils literal"><span class="pre">viewId</span></tt> keys that specify where the
client should be redirected after a successful authentication attempt if nothing else is
specified after the login attempt as a redirect url.</li>
<li>session - an Object used to configure the session store. It has a <tt class="docutils literal"><span class="pre">store</span></tt> key that represents
the path to the store implementation. If the store implementation also needs configuration
options then the <tt class="docutils literal"><span class="pre">session</span></tt> key will have to have the <tt class="docutils literal"><span class="pre">path</span></tt> (the implementation module path)
and <tt class="docutils literal"><span class="pre">options</span></tt> (an Object with the store options) keys.</li>
<li>identity - an Object used to set the <a class="reference internal" href="../server/api/IdentityProvider.html"><em>IdentityProvider</em></a>
implementation. It has a <tt class="docutils literal"><span class="pre">provider</span></tt> key that represents the path to the implementation module.</li>
<li>cookieSecret - a String that is used to sign the cookies.</li>
<li>cookieMaxAge - the number of seconds after which to expire the session cookie if no new
requests are done by the user. The cookie is removed when the browser is closed if this value
isn&#8217;t specified.</li>
</ul>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;server&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;port&quot;</span><span class="o">:</span> <span class="mi">1337</span><span class="p">,</span>
        <span class="s2">&quot;timeoutForRequests&quot;</span> <span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;components&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;./components&quot;</span><span class="p">]</span>
    <span class="p">},</span>

    <span class="s2">&quot;defaultLanguage&quot;</span><span class="o">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span>
    <span class="s2">&quot;language&quot;</span><span class="o">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span>

    <span class="s2">&quot;logger&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;level&quot;</span><span class="o">:</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span>
        <span class="s2">&quot;appenders&quot;</span><span class="o">:</span> <span class="p">[{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;console&quot;</span><span class="p">,</span>
            <span class="s2">&quot;layout&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;pattern&quot;</span><span class="p">,</span>
                <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;pattern&quot;</span><span class="o">:</span> <span class="s2">&quot;%logger - %source - [%level] %date: %message %stacktrace&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;foreground&quot;</span><span class="o">:</span> <span class="s2">&quot;green&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;info&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;foreground&quot;</span><span class="o">:</span> <span class="s2">&quot;cyan&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;warn&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;foreground&quot;</span><span class="o">:</span> <span class="s2">&quot;yellow&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;error&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;foreground&quot;</span><span class="o">:</span> <span class="s2">&quot;red&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;fatal&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;foreground&quot;</span><span class="o">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;background&quot;</span><span class="o">:</span> <span class="s2">&quot;red&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}]</span>
    <span class="p">},</span>

    <span class="s2">&quot;languages&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;English&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;de_DE&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;Deutsch&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;ro_RO&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;Română&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;ar_SA&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;عربي&quot;</span><span class="p">}</span>
    <span class="p">],</span>

    <span class="s2">&quot;errorComponent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span>
    <span class="p">},</span>

    <span class="s2">&quot;loadingComponent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;placeholder&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;viewId&quot;</span><span class="o">:</span> <span class="s2">&quot;index&quot;</span><span class="p">,</span>
        <span class="s2">&quot;timeout&quot;</span><span class="o">:</span> <span class="mi">500</span>
    <span class="p">},</span>

     <span class="s2">&quot;loginComponent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;viewId&quot;</span><span class="o">:</span> <span class="s2">&quot;login&quot;</span>
    <span class="p">},</span>

    <span class="s2">&quot;mainComponent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;sprint_example_list&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;viewId&quot;</span><span class="o">:</span> <span class="s2">&quot;index&quot;</span>
    <span class="p">},</span>

    <span class="s2">&quot;session&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;store&quot;</span><span class="o">:</span> <span class="s2">&quot;./configuration/custom_session_store&quot;</span>
    <span class="p">},</span>

    <span class="s2">&quot;identity&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;provider&quot;</span><span class="o">:</span> <span class="s2">&quot;./configuration/custom_identity_provider&quot;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="component-configuration">
<h2>Component configuration<a class="headerlink" href="#component-configuration" title="Permalink to this headline">¶</a></h2>
<p>Please read <a class="reference internal" href="../server/component_descriptor.html"><em>Component configuration</em></a> for more information.</p>
</div>
<div class="section" id="sensitive-information-configuration">
<h2>Sensitive information configuration<a class="headerlink" href="#sensitive-information-configuration" title="Permalink to this headline">¶</a></h2>
<p>The sensitive information configuration file must be placed in the conf folder.</p>
<div class="section" id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>

    <span class="s2">&quot;cookieSecret&quot;</span><span class="o">:</span> <span class="s2">&quot;custom secret&quot;</span><span class="p">,</span>
    <span class="s2">&quot;custom_sensitivekey&quot;</span><span class="o">:</span> <span class="s2">&quot;custom sensitive value&quot;</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The only required parameter is the <em>&#8220;cookieSecret&#8221;</em></p>
</div>
</div>
<div class="section" id="language-configuration">
<h2>Language configuration<a class="headerlink" href="#language-configuration" title="Permalink to this headline">¶</a></h2>
<p>The rain server can support configuration for individual domains. It is advisable that you set
this configuration in another &lt;filename&gt;.conf in your conf folder. For example &#8220;language.conf&#8221;.</p>
<p>A valid example of this configuration must look like this:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre> <span class="p">{</span>
    <span class="s2">&quot;tlds&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;net&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;defaultLanguage&quot;</span><span class="o">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span>
            <span class="s2">&quot;supportedLanguages&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;en_US&quot;</span><span class="p">,</span> <span class="s2">&quot;ro_RO&quot;</span><span class="p">,</span> <span class="s2">&quot;en_UK&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;com&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;defaultLanguage&quot;</span><span class="o">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span>
            <span class="s2">&quot;supportedLanguages&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;en_US&quot;</span><span class="p">,</span> <span class="s2">&quot;ro_RO&quot;</span><span class="p">,</span> <span class="s2">&quot;en_UK&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>As you can see in this example the first key is the domain than you have a defaultLanguage and
an array of supportedLanguages. Both of this parameters <tt class="docutils literal"><span class="pre">defaultLanguage</span></tt> and <tt class="docutils literal"><span class="pre">supportedLanguages</span></tt>
are mandatory.</p>
<p>The userLanguage is set from the start depending on the browser accepted-language if it&#8217;s accepted
or the defaultLanguage.</p>
<p>All the text for the selectLanguage menu must be set in the <tt class="docutils literal"><span class="pre">server.conf</span></tt> at the <tt class="docutils literal"><span class="pre">languages</span></tt> key.</p>
<div class="section" id="expected-behavior">
<h3>Expected behavior:<a class="headerlink" href="#expected-behavior" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If there is a supported language on a domain that has no text for the select language component,
it will not be included.</li>
<li>If the browsers Accepted-Language header is not supported than the userLanguage will be set to
the defaultLanguage</li>
<li>If domain does not exist it will use the preset languages with default language in the server.conf</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Server and component configuration</a><ul>
<li><a class="reference internal" href="#server-configuration">Server configuration</a><ul>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#component-configuration">Component configuration</a></li>
<li><a class="reference internal" href="#sensitive-information-configuration">Sensitive information configuration</a><ul>
<li><a class="reference internal" href="#id1">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#language-configuration">Language configuration</a><ul>
<li><a class="reference internal" href="#expected-behavior">Expected behavior:</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rain_sdk_tutorial.html"
                        title="previous chapter">RAIN SDK Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../server/component_descriptor.html"
                        title="next chapter">RAIN component descriptor</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../server/component_descriptor.html" title="RAIN component descriptor"
             >next</a> |</li>
        <li class="right" >
          <a href="rain_sdk_tutorial.html" title="RAIN SDK Tutorial"
             >previous</a> |</li>
        <li><a href="../index.html">Rain 0.25.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>