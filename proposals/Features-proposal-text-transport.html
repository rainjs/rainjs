

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Text transport &mdash; Rain v0.8.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Rain v0.8.0 documentation" href="../index.html" />
    <link rel="next" title="View authorization" href="Features-proposal-view-authorization.html" />
    <link rel="prev" title="Server Translations System" href="Features-proposal-server-language.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Features-proposal-view-authorization.html" title="View authorization"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Features-proposal-server-language.html" title="Server Translations System"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Rain v0.8.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="text-transport">
<h1>Text transport<a class="headerlink" href="#text-transport" title="Permalink to this headline">¶</a></h1>
<p>RAIN should support sending the translation files to the client in order to be able to localize code
written in the client logic.</p>
<p>The text proposal should be implemented by adding a new route for localization files, possibly
under <tt class="docutils literal"><span class="pre">/&lt;component&gt;/&lt;version&gt;/locale</span></tt>. Note that the name of the localization has been omitted.
That is because typically there should only be one localization file exposed per
component.</p>
<div class="section" id="format">
<span id="text-transport-format"></span><h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p>The localization file exposed to the client should be formatted as a JSON file, containing the
messages in both the server language and the default language, in case there are message ids defined
in the default language that do not exist in the configured language (this can be better described
as a mathematical set union).</p>
<p>An example of a translation file could be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;lang&quot;</span><span class="p">:</span> <span class="s">&quot;en&quot;</span><span class="p">,</span>
        <span class="s">&quot;plural_forms&quot;</span><span class="p">:</span> <span class="s">&quot;nplurals=2; plural=(n != 1);&quot;</span><span class="p">,</span>
        <span class="s">&quot;domain&quot;</span><span class="p">:</span> <span class="s">&quot;messages&quot;</span>
    <span class="p">},</span>
    <span class="s">&quot;Sincerely,&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">null</span><span class="p">,</span> <span class="s">&quot;Cu stimă,&quot;</span><span class="p">],</span>
    <span class="s">&quot;Send email&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">null</span><span class="p">,</span> <span class="s">&quot;Send email&quot;</span><span class="p">],</span>
    <span class="s">&quot;msgid&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">pl</span><span class="p">,</span> <span class="n">sg</span><span class="p">,</span> <span class="n">pl</span><span class="p">,</span> <span class="n">pl2</span><span class="p">,</span> <span class="n">pl3</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This file could be served from disk or from memory, since it will probably be loaded on server
startup so that in can be used by the server side localization functions.</p>
</div>
<div class="section" id="client-side-requirements">
<h2>Client side requirements<a class="headerlink" href="#client-side-requirements" title="Permalink to this headline">¶</a></h2>
<p>The JSON file described in <a class="reference internal" href="#text-transport-format"><em>Format</em></a> should be requested by the client as a
dependency of the client side controller (this way the client side controller has the translation
data available).</p>
<p>For this to work we need a JSON plugin for requirejs (there is one already written).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Text transport</a><ul>
<li><a class="reference internal" href="#format">Format</a></li>
<li><a class="reference internal" href="#client-side-requirements">Client side requirements</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Features-proposal-server-language.html"
                        title="previous chapter">Server Translations System</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Features-proposal-view-authorization.html"
                        title="next chapter">View authorization</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Features-proposal-view-authorization.html" title="View authorization"
             >next</a> |</li>
        <li class="right" >
          <a href="Features-proposal-server-language.html" title="Server Translations System"
             >previous</a> |</li>
        <li><a href="../index.html">Rain v0.8.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  </body>
</html>